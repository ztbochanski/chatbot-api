<!DOCTYPE html>
<html lang="en">
<head>
  <title>example client</title>
</head>
<body>

  <div class="message_holder"></div>

  <form action="" method="POST">
    <input type="text" class="message" placeholder="message.."/>
    <input type="submit"/>
  </form>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdn.socket.io/4.5.0/socket.io.min.js" integrity="sha384-7EyYLQZgWBi67fBtVxw60/OWl1kjsfrPFcaU0pp0nAh+i8FD068QogUvg85Ewy1k" crossorigin="anonymous"></script>
  <script type="text/javascript">
    let socket = io.connect('http://' + document.domain + ':' + location.port)

    socket.on('connect', function() {
      let form = $('form').on('submit', function(e) {
        e.preventDefault()
        let user_input = $( 'input.message' ).val()
        socket.emit('client event', {
          message: user_input,
          context: context
        } )
        $('div.message_holder').append('<div>'+'User: '+user_input+'</div>')
        $('input.message').val('').focus()
      } )
    } )
    socket.on( 'server event', function(payload) {
      if (!payload.message == '') {
        console.log(payload)
        $('div.message_holder').append('<div>'+'Med Bot: '+payload.message+'</div>')
      }
    })
  </script>

</body>
</html>
